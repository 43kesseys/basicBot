(function(){API.getWaitListPosition=function(e){(void 0===e||null===e)&&(e=API.getUser().id);for(var t=API.getWaitList(),n=0;n<t.length;n++)if(t[n].id===e)return n;return-1};var e=function(){clearInterval(l.room.autodisableInterval),clearInterval(l.room.afkInterval),l.status=!1},t=function(){localStorage.setItem("basicBotsettings",JSON.stringify(l.settings)),localStorage.setItem("basicBotRoom",JSON.stringify(l.room));var e={time:Date.now(),stored:!0,version:l.version};localStorage.setItem("basicBotStorageInfo",JSON.stringify(e))},n=function(e,t){if(void 0===e)return API.chatLog("There is a chat text missing."),console.log("There is a chat text missing."),"[Error] No text message found.";var n="%%";for(var i in t)e=e.replace(n+i.toUpperCase()+n,t[i]);return e},i=function(e){e||(e=function(){}),$.get("https://rawgit.com/girr/basicBot/master/lang/langIndex.json",function(t){var n=l.chatLink;null!==t&&void 0!==t?(langIndex=t,n=langIndex[l.settings.language.toLowerCase()],l.settings.chatLink!==l.chatLink?n=l.settings.chatLink:void 0===n&&(n=l.chatLink),$.get(n,function(t){null!==t&&void 0!==t&&("string"==typeof t&&(t=JSON.parse(t)),l.chat=t,e())})):$.get(l.chatLink,function(t){null!==t&&void 0!==t&&("string"==typeof t&&(t=JSON.parse(t)),l.chat=t,e())})})},a=function(){var e=JSON.parse(localStorage.getItem("basicBotsettings"));if(null!==e)for(var t in e)l.settings[t]=e[t]},o=function(){var e=localStorage.getItem("basicBotStorageInfo");if(null===e)API.chatLog(l.chat.nodatafound);else{var t=JSON.parse(localStorage.getItem("basicBotsettings")),n=JSON.parse(localStorage.getItem("basicBotRoom")),i=Date.now()-JSON.parse(e).time;if(36e5>i){API.chatLog(l.chat.retrievingdata);for(var a in t)l.settings[a]=t[a];l.room.users=n.users,l.room.afkList=n.afkList,l.room.historyList=n.historyList,l.room.mutedUsers=n.mutedUsers,l.room.autoskip=n.autoskip,l.room.roomstats=n.roomstats,l.room.messages=n.messages,l.room.queue=n.queue,l.room.newBlacklisted=n.newBlacklisted,API.chatLog(l.chat.datarestored)}}};String.prototype.splitBetween=function(e,t){var n=this;n=this.split(e);for(var i=0;i<n.length;i++)n[i]=n[i].split(t);for(var a=[],i=0;i<n.length;i++)if(Array.isArray(n[i]))for(var o=0;o<n[i].length;o++)a.push(n[i][o]);else a.push(n[i]);return a};var s=function(e){for(var t=e.splitBetween('<a href="',"</a>"),n=1;n<t.length;n+=2){var i=t[n].split('"')[0];t[n]=i}for(var a="",n=0;n<t.length;n++)a+=t[n];return a},r="Matthew (Yemasthui)",u="Benzi (Quoona)",m="Gir (girr)",c=["3851534","4105209","3277242"],l={version:"2.2.2",status:!1,name:"basicBot",loggedInID:null,scriptLink:"https://rawgit.com/girr/basicBot/master/basicBot.js",cmdLink:"http://git.io/x2Sw",chatLink:"https://rawgit.com/girr/basicBot/master/lang/en.json",chat:null,loadChat:i,retrieveSettings:a,retrieveFromStorage:o,settings:{botName:"basicBot",language:"english",chatLink:"https://rawgit.com/girr/basicBot/master/lang/en.json",startupCap:1,startupVolume:0,startupEmoji:!1,maximumAfk:120,afkRemoval:!0,maximumDc:60,bouncerPlus:!0,blacklistEnabled:!0,lockdownEnabled:!1,lockGuard:!1,maximumLocktime:10,cycleGuard:!0,maximumCycletime:10,voteSkip:!1,voteSkipLimit:10,historySkip:!1,timeGuard:!0,maximumSongLength:10,autodisable:!0,commandCooldown:30,usercommandsEnabled:!0,lockskipPosition:3,lockskipReasons:[["theme","This song does not fit the room theme. "],["op","This song is on the OP list. "],["history","This song is in the history. "],["mix","You played a mix, which is against the rules. "],["sound","The song you played had bad sound quality or no sound. "],["nsfw","The song you contained was NSFW (image or sound). "],["unavailable","The song you played was not available for some users. "]],afkpositionCheck:15,afkRankCheck:"ambassador",motdEnabled:!1,motdInterval:5,motd:"Temporary Message of the Day",filterChat:!0,etaRestriction:!1,welcome:!0,opLink:null,rulesLink:null,themeLink:null,fbLink:null,youtubeLink:null,website:null,intervalMessages:[],messageInterval:5,songstats:!0,commandLiteral:"!",blacklists:{NSFW:"https://rawgit.com/Yemasthui/basicBot-customization/master/blacklists/ExampleNSFWlist.json",OP:"https://rawgit.com/Yemasthui/basicBot-customization/master/blacklists/ExampleOPlist.json"}},room:{users:[],afkList:[],mutedUsers:[],bannedUsers:[],skippable:!0,usercommand:!0,allcommand:!0,afkInterval:null,autoskip:!1,autoskipTimer:null,autodisableInterval:null,autodisableFunc:function(){l.status&&l.settings.autodisable&&(API.sendChat("!afkdisable"),API.sendChat("!joindisable"))},queueing:0,queueable:!0,currentDJID:null,historyList:[],cycleTimer:setTimeout(function(){},1),roomstats:{accountName:null,totalWoots:0,totalCurates:0,totalMehs:0,launchTime:null,songCount:0,chatmessages:0},messages:{from:[],to:[],message:[]},queue:{id:[],position:[]},blacklists:{},newBlacklisted:[],newBlacklistedSongFunction:null,roulette:{rouletteStatus:!1,participants:[],countdown:null,startRoulette:function(){l.room.roulette.rouletteStatus=!0,l.room.roulette.countdown=setTimeout(function(){l.room.roulette.endRoulette()},6e4),API.sendChat(l.chat.isopen)},endRoulette:function(){l.room.roulette.rouletteStatus=!1;var e=Math.floor(Math.random()*l.room.roulette.participants.length),t=l.room.roulette.participants[e];l.room.roulette.participants=[];var i=Math.floor(Math.random()*API.getWaitList().length+1),a=l.userUtilities.lookupUser(t),o=a.username;API.sendChat(n(l.chat.winnerpicked,{name:o,position:i})),setTimeout(function(e,t){l.userUtilities.moveUser(e,t,!1)},1e3,t,i)}}},User:function(e,t){this.id=e,this.username=t,this.jointime=Date.now(),this.lastActivity=Date.now(),this.votes={woot:0,meh:0,curate:0},this.lastEta=null,this.afkWarningCount=0,this.afkCountdown=null,this.inRoom=!0,this.isMuted=!1,this.lastDC={time:null,position:null,songCount:0},this.lastKnownPosition=null},userUtilities:{getJointime:function(e){return e.jointime},getUser:function(e){return API.getUser(e.id)},updatePosition:function(e,t){e.lastKnownPosition=t},updateDC:function(e){e.lastDC.time=Date.now(),e.lastDC.position=e.lastKnownPosition,e.lastDC.songCount=l.room.roomstats.songCount},setLastActivity:function(e){e.lastActivity=Date.now(),e.afkWarningCount=0,clearTimeout(e.afkCountdown)},getLastActivity:function(e){return e.lastActivity},getWarningCount:function(e){return e.afkWarningCount},setWarningCount:function(e,t){e.afkWarningCount=t},lookupUser:function(e){for(var t=0;t<l.room.users.length;t++)if(l.room.users[t].id===e)return l.room.users[t];return!1},lookupUserName:function(e){for(var t=0;t<l.room.users.length;t++){var n=l.room.users[t].username.trim()==e.trim();if(n)return l.room.users[t]}return!1},voteRatio:function(e){var t=l.userUtilities.lookupUser(e),n=t.votes;return n.ratio=0===n.meh?1:(n.woot/n.meh).toFixed(2),n},getPermission:function(e){var t;t="object"==typeof e?e:API.getUser(e);for(var n=0;n<c.length;n++)if(c[n].indexOf(t.id)>-1)return 10;if(t.gRole<2)return t.role;switch(t.gRole){case 2:return 7;case 3:return 8;case 4:return 9;case 5:return 10}return 0},moveUser:function(e,t,i){var a=l.userUtilities.lookupUser(e),o=API.getWaitList();if(-1===API.getWaitListPosition(e)){if(!(o.length<50)){for(var s=-1,r=0;r<l.room.queue.id.length;r++)l.room.queue.id[r]===e&&(s=r);if(-1!==s)return l.room.queue.position[s]=t,API.sendChat(n(l.chat.alreadyadding,{position:l.room.queue.position[s]}));l.roomUtilities.booth.lockBooth(),i?(l.room.queue.id.unshift(e),l.room.queue.position.unshift(t)):(l.room.queue.id.push(e),l.room.queue.position.push(t));var u=a.username;return API.sendChat(n(l.chat.adding,{name:u,position:l.room.queue.position.length}))}API.moderateAddDJ(e),0!==t&&setTimeout(function(e,t){API.moderateMoveDJ(e,t)},1250,e,t)}else API.moderateMoveDJ(e,t)},dclookup:function(e){var t=l.userUtilities.lookupUser(e);if("boolean"==typeof t)return l.chat.usernotfound;var i=t.username;if(null===t.lastDC.time)return n(l.chat.notdisconnected,{name:i});var a=t.lastDC.time,o=t.lastDC.position;if(null===o)return l.chat.noposition;var s=Date.now()-a,r=!1;60*l.settings.maximumDc*1e3>s&&(r=!0);var u=l.roomUtilities.msToStr(s);if(!r)return n(l.chat.toolongago,{name:l.userUtilities.getUser(t).username,time:u});for(var m=l.room.roomstats.songCount-t.lastDC.songCount,c=0,d=l.room.afkList,h=0;h<d.length;h++){var g=d[h][1],f=d[h][2];g>a&&o>f&&c++}var v=t.lastDC.position-m-c;0>=v&&(v=1);var k=n(l.chat.valid,{name:l.userUtilities.getUser(t).username,time:u,position:v});return l.userUtilities.moveUser(t.id,v,!0),k}},roomUtilities:{rankToNumber:function(e){var t=null;switch(e){case"admin":t=10;break;case"ambassador":t=7;break;case"host":t=5;break;case"cohost":t=4;break;case"manager":t=3;break;case"bouncer":t=2;break;case"residentdj":t=1;break;case"user":t=0}return t},msToStr:function(e){var t,n,i;return n="",i={days:0,hours:0,minutes:0,seconds:0},t={day:864e5,hour:36e5,minute:6e4,second:1e3},e>t.day&&(i.days=Math.floor(e/t.day),e%=t.day),e>t.hour&&(i.hours=Math.floor(e/t.hour),e%=t.hour),e>t.minute&&(i.minutes=Math.floor(e/t.minute),e%=t.minute),e>t.second&&(i.seconds=Math.floor(e/t.second)),0!==i.days&&(n+=""+i.days+"d"),0!==i.hours&&(n+=""+i.hours+"h"),0!==i.minutes&&(n+=""+i.minutes+"m"),i.minutes<1&&i.hours<1&&i.days<1&&(n+=""+i.seconds+"s"),""!==n?n:!1},booth:{lockTimer:setTimeout(function(){},1e3),locked:!1,lockBooth:function(){API.moderateLockWaitList(!l.roomUtilities.booth.locked),l.roomUtilities.booth.locked=!1,l.settings.lockGuard&&(l.roomUtilities.booth.lockTimer=setTimeout(function(){API.moderateLockWaitList(l.roomUtilities.booth.locked)},60*l.settings.maximumLocktime*1e3))},unlockBooth:function(){API.moderateLockWaitList(l.roomUtilities.booth.locked),clearTimeout(l.roomUtilities.booth.lockTimer)}},afkCheck:function(){if(!l.status||!l.settings.afkRemoval)return void 0;var e=l.roomUtilities.rankToNumber(l.settings.afkRankCheck),t=API.getWaitList(),i=Math.min(t.length,l.settings.afkpositionCheck);if(i-1>t.length)return void 0;for(var a=0;i>a;a++)if(void 0!==t[a]){var o=t[a].id,s=l.userUtilities.lookupUser(o);if("boolean"!=typeof s){var r=l.userUtilities.getUser(s);if(null!==e&&l.userUtilities.getPermission(r)<=e){var u=r.username,m=l.userUtilities.getLastActivity(s),c=Date.now()-m,d=l.roomUtilities.msToStr(c),h=s.afkWarningCount;if(c>60*l.settings.maximumAfk*1e3)if(0===h)API.sendChat(n(l.chat.warning1,{name:u,time:d})),s.afkWarningCount=3,s.afkCountdown=setTimeout(function(e){e.afkWarningCount=1},9e4,s);else if(1===h)API.sendChat(n(l.chat.warning2,{name:u})),s.afkWarningCount=3,s.afkCountdown=setTimeout(function(e){e.afkWarningCount=2},3e4,s);else if(2===h){var g=API.getWaitListPosition(o);-1!==g&&(g++,l.room.afkList.push([o,Date.now(),g]),s.lastDC={time:null,position:null,songCount:0},API.moderateRemoveDJ(o),API.sendChat(n(l.chat.afkremove,{name:u,time:d,position:g,maximumafk:l.settings.maximumAfk}))),s.afkWarningCount=0}}}}},changeDJCycle:function(){var e=$(".cycle-toggle");e.hasClass("disabled")?(e.click(),l.settings.cycleGuard&&(l.room.cycleTimer=setTimeout(function(){e.hasClass("enabled")&&e.click()},60*l.settings.cycleMaxTime*1e3))):(e.click(),clearTimeout(l.room.cycleTimer))},intervalMessage:function(){var e;if(e=l.settings.motdEnabled?l.settings.motdInterval:l.settings.messageInterval,l.room.roomstats.songCount%e===0&&l.status){var t;if(l.settings.motdEnabled)t=l.settings.motd;else{if(0===l.settings.intervalMessages.length)return void 0;var n=l.room.roomstats.songCount%l.settings.intervalMessages.length;t=l.settings.intervalMessages[n]}API.sendChat("/me "+t)}},updateBlacklists:function(){for(var e in l.settings.blacklists)if(l.room.blacklists[e]=[],"function"==typeof l.settings.blacklists[e])l.room.blacklists[e]=l.settings.blacklists();else if("string"==typeof l.settings.blacklists[e]){if(""===l.settings.blacklists[e])continue;try{!function(e){$.get(l.settings.blacklists[e],function(t){"string"==typeof t&&(t=JSON.parse(t));var n=[];for(var i in t)void 0!==t[i].mid&&n.push(t[i].mid);l.room.blacklists[e]=n})}(e)}catch(t){API.chatLog("Error setting"+e+"blacklist."),console.log("Error setting"+e+"blacklist."),console.log(t)}}},logNewBlacklistedSongs:function(){void 0!==console.table?console.table(l.room.newBlacklisted):console.log(l.room.newBlacklisted)},exportNewBlacklistedSongs:function(){for(var e={},t=0;t<l.room.newBlacklisted.length;t++){var n=l.room.newBlacklisted[t];e[n.list]=[],e[n.list].push({title:n.title,author:n.author,mid:n.mid})}return e}},eventChat:function(e){e.message=s(e.message),e.message=e.message.trim();for(var t=0;t<l.room.users.length;t++)l.room.users[t].id===e.uid&&(l.userUtilities.setLastActivity(l.room.users[t]),l.room.users[t].username!==e.un&&(l.room.users[t].username=e.un));return l.chatUtilities.chatFilter(e)?void 0:void(l.chatUtilities.commandCheck(e)||l.chatUtilities.action(e))},eventUserjoin:function(e){for(var t=!1,i=null,a=0;a<l.room.users.length;a++)l.room.users[a].id===e.id&&(t=!0,i=a);var o=!0,s=null;if(t){l.room.users[i].inRoom=!0;var r=l.userUtilities.lookupUser(e.id),u=r.jointime,m=Date.now()-u;1e4>m?o=!1:s=!0}else l.room.users.push(new l.User(e.id,e.username)),s=!1;for(var c=0;c<l.room.users.length;c++)l.userUtilities.getUser(l.room.users[c]).id===e.id&&(l.userUtilities.setLastActivity(l.room.users[c]),l.room.users[c].jointime=Date.now());l.settings.welcome&&o&&(s?setTimeout(function(e){API.sendChat(n(l.chat.welcomeback,{name:e.username}))},1e3,e):setTimeout(function(e){API.sendChat(n(l.chat.welcome,{name:e.username}))},1e3,e))},eventUserleave:function(e){for(var t=0;t<l.room.users.length;t++)l.room.users[t].id===e.id&&(l.userUtilities.updateDC(l.room.users[t]),l.room.users[t].inRoom=!1)},eventVoteupdate:function(e){for(var t=0;t<l.room.users.length;t++)l.room.users[t].id===e.user.id&&(1===e.vote?l.room.users[t].votes.woot++:l.room.users[t].votes.meh++);var i=API.getScore().negative,a=API.getScore().positive,o=API.getDJ();l.settings.voteSkip&&i-a>=l.settings.voteSkipLimit&&(API.sendChat(n(l.chat.voteskipexceededlimit,{name:o.username,limit:l.settings.voteSkipLimit})),API.moderateForceSkip())},eventCurateupdate:function(e){for(var t=0;t<l.room.users.length;t++)l.room.users[t].id===e.user.id&&l.room.users[t].votes.curate++},eventDjadvance:function(e){$("#woot").click();for(var i=l.userUtilities.lookupUser(e.dj.id),a=0;a<l.room.users.length;a++)l.room.users[a].id===i.id&&(l.room.users[a].lastDC={time:null,position:null,songCount:0});var o=e.lastPlay;if(void 0!==o){l.settings.songstats&&API.sendChat(void 0===l.chat.songstatistics?"/me "+o.media.author+" - "+o.media.title+": "+o.score.positive+"W/"+o.score.grabs+"G/"+o.score.negative+"M.":n(l.chat.songstatistics,{artist:o.media.author,title:o.media.title,woots:o.score.positive,grabs:o.score.grabs,mehs:o.score.negative})),l.room.roomstats.totalWoots+=o.score.positive,l.room.roomstats.totalMehs+=o.score.negative,l.room.roomstats.totalCurates+=o.score.grabs,l.room.roomstats.songCount++,l.roomUtilities.intervalMessage(),l.room.currentDJID=e.dj.id;var s=e.media.format+":"+e.media.cid;for(var r in l.room.blacklists)if(l.settings.blacklistEnabled&&l.room.blacklists[r].indexOf(s)>-1)return API.sendChat(n(l.chat.isblacklisted,{blacklist:r})),API.moderateForceSkip();if(l.settings.historySkip){for(var u=!1,m=API.getHistory(),c=e.dj.username,a=0;a<m.length;a++)m[a].media.cid===e.media.cid&&(API.sendChat(n(l.chat.songknown,{name:c})),API.moderateForceSkip(),l.room.historyList[a].push(+new Date),u=!0);u||l.room.historyList.push([e.media.cid,+new Date])}var d=e.media;if(l.settings.timeGuard&&d.duration>60*l.settings.maximumSongLength&&!l.room.roomevent){var c=e.dj.username;API.sendChat(n(l.chat.timelimit,{name:c,maxlength:l.settings.maximumSongLength})),API.moderateForceSkip()}if(i.ownSong&&(API.sendChat(n(l.chat.permissionownsong,{name:i.username})),i.ownSong=!1),clearTimeout(l.room.autoskipTimer),l.room.autoskip){var h=1e3*e.media.duration;l.room.autoskipTimer=setTimeout(function(){console.log("Skipping track."),API.moderateForceSkip()},h+3e3)}t()}},eventWaitlistupdate:function(e){if(e.length<50&&l.room.queue.id.length>0&&l.room.queueable){l.room.queueable=!1,setTimeout(function(){l.room.queueable=!0},500),l.room.queueing++;var t,n;setTimeout(function(){t=l.room.queue.id.splice(0,1)[0],n=l.room.queue.position.splice(0,1)[0],API.moderateAddDJ(t,n),setTimeout(function(e,t){API.moderateMoveDJ(e,t),l.room.queueing--,0===l.room.queue.id.length&&setTimeout(function(){l.roomUtilities.booth.unlockBooth()},1e3)},1e3,t,n)},1e3+2500*l.room.queueing)}for(var i=0;i<e.length;i++){var a=l.userUtilities.lookupUser(e[i].id);l.userUtilities.updatePosition(a,API.getWaitListPosition(e[i].id)+1)}},chatcleaner:function(e){if(!l.settings.filterChat)return!1;if(l.userUtilities.getPermission(e.uid)>1)return!1;for(var t=e.message,i=!1,a=0;a<t.length;a++)o=t.charAt(a),(o>="a"&&"z">=o||o>="A"&&"Z">=o||o>="0"&&"9">=o||":"===o||"^"===o)&&(i=!0);if(""===t)return!0;if(!i&&(1===t.length||t.length>3))return!0;t=t.replace(/[ ,;.:\/=~+%^*\-\\"'&@#]/g,"");for(var o,s=0,a=0;a<t.length;a++)o=t.charAt(a),o>="A"&&"Z">=o&&s++;if(s>=40)return API.sendChat(n(l.chat.caps,{name:e.un})),!0;if(t=t.toLowerCase(),"skip"===t)return API.sendChat(n(l.chat.askskip,{name:e.un})),!0;for(var r=0;r<l.chatUtilities.spam.length;r++)if(t===l.chatUtilities.spam[r])return API.sendChat(n(l.chat.spam,{name:e.un})),!0;return!1},chatUtilities:{chatFilter:function(e){for(var t=e.message,i=l.userUtilities.getPermission(e.uid),a=(l.userUtilities.lookupUser(e.uid),!1),o=0;o<l.room.mutedUsers.length;o++)l.room.mutedUsers[o]===e.uid&&(a=!0);if(a)return API.moderateDeleteChat(e.cid),!0;if(l.settings.lockdownEnabled&&0===i)return API.moderateDeleteChat(e.cid),!0;if(l.chatcleaner(e))return API.moderateDeleteChat(e.cid),!0;if(t.indexOf("http://adf.ly/")>-1)return API.moderateDeleteChat(e.cid),API.sendChat(n(l.chat.adfly,{name:e.un})),!0;if(t.indexOf("autojoin was not enabled")>0||t.indexOf("AFK message was not enabled")>0||t.indexOf("!afkdisable")>0||t.indexOf("!joindisable")>0||t.indexOf("autojoin disabled")>0||t.indexOf("AFK message disabled")>0)return API.moderateDeleteChat(e.cid),!0;var s=l.chat.roulettejoin,r=l.chat.rouletteleave,u=s.split("%%NAME%%");u=u[1].length>u[0].length?u[1]:u[0];var m=r.split("%%NAME%%");return m=m[1].length>m[0].length?m[1]:m[0],(t.indexOf(u)>-1||t.indexOf(m)>-1)&&e.uid===l.loggedInID?(setTimeout(function(e){API.moderateDeleteChat(e)},2e3,e.cid),!0):!1},commandCheck:function(e){var t;if("!"!==e.message.charAt(0))return!1;var n=e.message.indexOf(" ");t=-1===n?e.message:e.message.substring(0,n);var i=l.userUtilities.getPermission(e.uid);if("!join"!==e.message&&"!leave"!==e.message){if(0===i&&!l.room.usercommand)return void 0;if(!l.room.allcommand)return void 0}if("!eta"===e.message&&l.settings.etaRestriction&&2>i){var a=l.userUtilities.lookupUser(e.uid);if(null!==a.lastEta&&Date.now()-a.lastEta<36e5)return void API.moderateDeleteChat(e.cid);a.lastEta=Date.now()}var o=!1;for(var s in l.commands){var r=l.commands[s].command;Array.isArray(r)||(r=[r]);for(var u=0;u<r.length;u++)if(l.settings.commandLiteral+r[u]===t){l.commands[s].functionality(e,l.settings.commandLiteral+r[u]),o=!0;break}}return o&&0===i&&(l.room.usercommand=!1,setTimeout(function(){l.room.usercommand=!0},1e3*l.settings.commandCooldown)),o&&(API.moderateDeleteChat(e.cid),l.room.allcommand=!1,setTimeout(function(){l.room.allcommand=!0},5e3)),o},action:function(e){l.userUtilities.lookupUser(e.uid);if("message"===e.type)for(var t=0;t<l.room.users.length;t++)l.userUtilities.getUser(l.room.users[t]).id===e.uid&&l.userUtilities.setLastActivity(l.room.users[t]);l.room.roomstats.chatmessages++},spam:["hueh","hu3","brbr","heu","brbr","kkkk","spoder","mafia","zuera","zueira","zueria","aehoo","aheu","alguem","algum","brazil","zoeira","fuckadmins","affff","vaisefoder","huenaarea","hitler","ashua","ahsu","ashau","lulz","huehue","hue","huehuehue","merda","pqp","puta","mulher","pula","retarda","caralho","filha","ppk","gringo","fuder","foder","hua","ahue","modafuka","modafoka","mudafuka","mudafoka","ooooooooooooooo","foda"],curses:["nigger","faggot","nigga","niqqa","motherfucker","modafocka"]},connectAPI:function(){this.proxy={eventChat:$.proxy(this.eventChat,this),eventUserskip:$.proxy(this.eventUserskip,this),eventUserjoin:$.proxy(this.eventUserjoin,this),eventUserleave:$.proxy(this.eventUserleave,this),eventUserfan:$.proxy(this.eventUserfan,this),eventFriendjoin:$.proxy(this.eventFriendjoin,this),eventFanjoin:$.proxy(this.eventFanjoin,this),eventVoteupdate:$.proxy(this.eventVoteupdate,this),eventCurateupdate:$.proxy(this.eventCurateupdate,this),eventRoomscoreupdate:$.proxy(this.eventRoomscoreupdate,this),eventDjadvance:$.proxy(this.eventDjadvance,this),eventDjupdate:$.proxy(this.eventDjupdate,this),eventWaitlistupdate:$.proxy(this.eventWaitlistupdate,this),eventVoteskip:$.proxy(this.eventVoteskip,this),eventModskip:$.proxy(this.eventModskip,this),eventChatcommand:$.proxy(this.eventChatcommand,this),eventHistoryupdate:$.proxy(this.eventHistoryupdate,this)},API.on(API.CHAT,this.proxy.eventChat),API.on(API.USER_SKIP,this.proxy.eventUserskip),API.on(API.USER_JOIN,this.proxy.eventUserjoin),API.on(API.USER_LEAVE,this.proxy.eventUserleave),API.on(API.USER_FAN,this.proxy.eventUserfan),API.on(API.VOTE_UPDATE,this.proxy.eventVoteupdate),API.on(API.GRAB_UPDATE,this.proxy.eventCurateupdate),API.on(API.ROOM_SCORE_UPDATE,this.proxy.eventRoomscoreupdate),API.on(API.ADVANCE,this.proxy.eventDjadvance),API.on(API.WAIT_LIST_UPDATE,this.proxy.eventWaitlistupdate),API.on(API.MOD_SKIP,this.proxy.eventModskip),API.on(API.CHAT_COMMAND,this.proxy.eventChatcommand),API.on(API.HISTORY_UPDATE,this.proxy.eventHistoryupdate)},disconnectAPI:function(){API.off(API.CHAT,this.proxy.eventChat),API.off(API.USER_SKIP,this.proxy.eventUserskip),API.off(API.USER_JOIN,this.proxy.eventUserjoin),API.off(API.USER_LEAVE,this.proxy.eventUserleave),API.off(API.USER_FAN,this.proxy.eventUserfan),API.off(API.VOTE_UPDATE,this.proxy.eventVoteupdate),API.off(API.CURATE_UPDATE,this.proxy.eventCurateupdate),API.off(API.ROOM_SCORE_UPDATE,this.proxy.eventRoomscoreupdate),API.off(API.ADVANCE,this.proxy.eventDjadvance),API.off(API.WAIT_LIST_UPDATE,this.proxy.eventWaitlistupdate),API.off(API.MOD_SKIP,this.proxy.eventModskip),API.off(API.CHAT_COMMAND,this.proxy.eventChatcommand),API.off(API.HISTORY_UPDATE,this.proxy.eventHistoryupdate)},startup:function(){Function.prototype.toString=function(){return"Function."};var e=API.getUser();if(l.userUtilities.getPermission(e)<2)return API.chatLog(l.chat.greyuser);2===l.userUtilities.getPermission(e)&&API.chatLog(l.chat.bouncer),l.connectAPI(),API.moderateDeleteChat=function(e){$.ajax({url:"https://plug.dj/_/chat/"+e,type:"DELETE"})},a(),o(),window.bot=l,l.roomUtilities.updateBlacklists(),setInterval(l.roomUtilities.updateBlacklists,36e5),l.getNewBlacklistedSongs=l.roomUtilities.exportNewBlacklistedSongs,l.logNewBlacklistedSongs=l.roomUtilities.logNewBlacklistedSongs,null===l.room.roomstats.launchTime&&(l.room.roomstats.launchTime=Date.now());for(var t=0;t<l.room.users.length;t++)l.room.users[t].inRoom=!1;for(var s=API.getUsers(),r=0;r<s.length;r++){for(var u=!1,m=null,t=0;t<l.room.users.length;t++)l.room.users[t].id===s[r].id&&(u=!0,m=t);u?l.room.users[m].inRoom=!0:(l.room.users.push(new l.User(s[r].id,s[r].username)),m=l.room.users.length-1);var c=API.getWaitListPosition(l.room.users[m].id)+1;l.userUtilities.updatePosition(l.room.users[m],c)}if(l.room.afkInterval=setInterval(function(){l.roomUtilities.afkCheck()},1e4),l.room.autodisableInterval=setInterval(function(){l.room.autodisableFunc()},36e5),l.loggedInID=API.getUser().id,l.status=!0,API.sendChat("/cap "+l.settings.startupCap),API.setVolume(l.settings.startupVolume),$("#woot").click(),l.settings.startupEmoji){var d=$(".icon-emoji-off");d.length>0&&d[0].click(),API.chatLog(":smile: Emojis enabled.")}else{var h=$(".icon-emoji-on");h.length>0&&h[0].click(),API.chatLog("Emojis disabled.")}API.chatLog("Avatars capped at "+l.settings.startupCap),API.chatLog("Volume set to "+l.settings.startupVolume),i(API.sendChat(n(l.chat.online,{botname:l.settings.botName,version:l.version})))},commands:{executable:function(e,t){var n,i=t.uid,a=l.userUtilities.getPermission(i);switch(e){case"admin":n=10;break;case"ambassador":n=7;break;case"host":n=5;break;case"cohost":n=4;break;case"manager":n=3;break;case"mod":n=l.settings.bouncerPlus?2:3;break;case"bouncer":n=2;break;case"residentdj":n=1;break;case"user":n=0;break;default:API.chatLog("error assigning minimum permission")}return a>=n},activeCommand:{command:"active",rank:"bouncer",type:"startsWith",functionality:function(e,t){if("exact"===this.type&&e.message.length!==t.length)return void 0;if(!l.commands.executable(this.rank,e))return void 0;var i,a=e.message,o=Date.now(),s=0;if(a.length===t.length)i=60;else if(i=a.substring(t.length+1),isNaN(i))return API.sendChat(n(l.chat.invalidtime,{name:e.un}));for(var r=0;r<l.room.users.length;r++)userTime=l.userUtilities.getLastActivity(l.room.users[r]),o-userTime<=60*i*1e3&&s++;API.sendChat(n(l.chat.activeusersintime,{name:e.un,amount:s,time:i}))}},addCommand:{command:"add",rank:"mod",type:"startsWith",functionality:function(e,t){if("exact"===this.type&&e.message.length!==t.length)return void 0;if(!l.commands.executable(this.rank,e))return void 0;var i=e.message;if(i.length===t.length)return API.sendChat(n(l.chat.nouserspecified,{name:e.un}));var a=i.substr(t.length+2),o=l.userUtilities.lookupUserName(a);i.length>t.length+2&&(void 0!==o?(l.room.roomevent&&l.room.eventArtists.push(o.id),API.moderateAddDJ(o.id)):API.sendChat(n(l.chat.invaliduserspecified,{name:e.un})))}},afklimitCommand:{command:"afklimit",rank:"manager",type:"startsWith",functionality:function(e,t){if("exact"===this.type&&e.message.length!==t.length)return void 0;if(!l.commands.executable(this.rank,e))return void 0;var i=e.message;if(i.length===t.length)return API.sendChat(n(l.chat.nolimitspecified,{name:e.un}));var a=i.substring(t.length+1);isNaN(a)?API.sendChat(n(l.chat.invalidlimitspecified,{name:e.un})):(l.settings.maximumAfk=parseInt(a,10),API.sendChat(n(l.chat.maximumafktimeset,{name:e.un,time:l.settings.maximumAfk})))}},afkremovalCommand:{command:"afkremoval",rank:"mod",type:"exact",functionality:function(e,t){return"exact"===this.type&&e.message.length!==t.length?void 0:l.commands.executable(this.rank,e)?void(l.settings.afkRemoval?(l.settings.afkRemoval=!l.settings.afkRemoval,clearInterval(l.room.afkInterval),API.sendChat(n(l.chat.toggleoff,{name:e.un,"function":l.chat.afkremoval}))):(l.settings.afkRemoval=!l.settings.afkRemoval,l.room.afkInterval=setInterval(function(){l.roomUtilities.afkCheck()},2e3),API.sendChat(n(l.chat.toggleon,{name:e.un,"function":l.chat.afkremoval})))):void 0}},afkresetCommand:{command:"afkreset",rank:"bouncer",type:"startsWith",functionality:function(e,t){if("exact"===this.type&&e.message.length!==t.length)return void 0;if(!l.commands.executable(this.rank,e))return void 0;var i=e.message;if(i.length===t.length)return API.sendChat(n(l.chat.nouserspecified,{name:e.un}));var a=i.substring(t.length+2),o=l.userUtilities.lookupUserName(a);return"boolean"==typeof o?API.sendChat(n(l.chat.invaliduserspecified,{name:e.un})):(l.userUtilities.setLastActivity(o),void API.sendChat(n(l.chat.afkstatusreset,{name:e.un,username:a})))}},afktimeCommand:{command:"afktime",rank:"bouncer",type:"startsWith",functionality:function(e,t){if("exact"===this.type&&e.message.length!==t.length)return void 0;if(!l.commands.executable(this.rank,e))return void 0;var i=e.message;if(i.length===t.length)return API.sendChat(n(l.chat.nouserspecified,{name:e.un}));var a=i.substring(t.length+2),o=l.userUtilities.lookupUserName(a);if("boolean"==typeof o)return API.sendChat(n(l.chat.invaliduserspecified,{name:e.un}));var s=l.userUtilities.getLastActivity(o),r=Date.now()-s,u=l.roomUtilities.msToStr(r);API.sendChat(n(l.chat.inactivefor,{name:e.un,username:a,time:u}))}},autodisableCommand:{command:"autodisable",rank:"bouncer",type:"exact",functionality:function(e,t){return"exact"===this.type&&e.message.length!==t.length?void 0:l.commands.executable(this.rank,e)?l.settings.autodisable?(l.settings.autodisable=!l.settings.autodisable,API.sendChat(n(l.chat.toggleoff,{name:e.un,"function":l.chat.autodisable}))):(l.settings.autodisable=!l.settings.autodisable,API.sendChat(n(l.chat.toggleon,{name:e.un,"function":l.chat.autodisable}))):void 0}},autoskipCommand:{command:"autoskip",rank:"mod",type:"exact",functionality:function(e,t){return"exact"===this.type&&e.message.length!==t.length?void 0:l.commands.executable(this.rank,e)?l.room.autoskip?(l.room.autoskip=!l.room.autoskip,clearTimeout(l.room.autoskipTimer),API.sendChat(n(l.chat.toggleoff,{name:e.un,"function":l.chat.autoskip}))):(l.room.autoskip=!l.room.autoskip,API.sendChat(n(l.chat.toggleon,{name:e.un,"function":l.chat.autoskip}))):void 0}},autowootCommand:{command:"autowoot",rank:"user",type:"exact",functionality:function(e,t){return"exact"===this.type&&e.message.length!==t.length?void 0:l.commands.executable(this.rank,e)?void API.sendChat(l.chat.autowoot):void 0}},baCommand:{command:"ba",rank:"user",type:"exact",functionality:function(e,t){return"exact"===this.type&&e.message.length!==t.length?void 0:l.commands.executable(this.rank,e)?void API.sendChat(l.chat.brandambassador):void 0}},banCommand:{command:"ban",rank:"bouncer",type:"startsWith",functionality:function(e,t){if("exact"===this.type&&e.message.length!==t.length)return void 0;if(!l.commands.executable(this.rank,e))return void 0;var i=e.message;if(i.length===t.length)return API.sendChat(n(l.chat.nouserspecified,{name:e.un}));var a=i.substr(t.length+2),o=l.userUtilities.lookupUserName(a);return"boolean"==typeof o?API.sendChat(n(l.chat.invaliduserspecified,{name:e.un})):void API.moderateBanUser(o.id,1,API.BAN.DAY)}},blacklistCommand:{command:["blacklist","bl"],rank:"bouncer",type:"startsWith",functionality:function(e,t){if("exact"===this.type&&e.message.length!==t.length)return void 0;if(!l.commands.executable(this.rank,e))return void 0;var i=e.message;if(i.length===t.length)return API.sendChat(n(l.chat.nolistspecified,{name:e.un}));var a=i.substr(t.length+1);if(void 0===l.room.blacklists[a])return API.sendChat(n(l.chat.invalidlistspecified,{name:e.un}));var o=API.getMedia(),s={list:a,author:o.author,title:o.title,mid:o.format+":"+o.cid};l.room.newBlacklisted.push(s),l.room.blacklists[a].push(o.format+":"+o.cid),API.sendChat(n(l.chat.newblacklisted,{name:e.un,blacklist:a,author:o.author,title:o.title,mid:o.format+":"+o.cid})),API.moderateForceSkip(),"function"==typeof l.room.newBlacklistedSongFunction&&l.room.newBlacklistedSongFunction(s)}},blinfoCommand:{command:"blinfo",rank:"bouncer",type:"exact",functionality:function(e,t){if("exact"===this.type&&e.message.length!==t.length)return void 0;if(!l.commands.executable(this.rank,e))return void 0;var i=API.getMedia().author,a=API.getMedia().title,o=e.un,s=API.getMedia().format,r=API.getMedia().cid,u=s+":"+r;API.sendChat(n(l.chat.blinfo,{name:o,author:i,title:a,songid:u}))}},bouncerPlusCommand:{command:"bouncer+",rank:"mod",type:"exact",functionality:function(e,t){if("exact"===this.type&&e.message.length!==t.length)return void 0;if(!l.commands.executable(this.rank,e))return void 0;e.message;if(l.settings.bouncerPlus)return l.settings.bouncerPlus=!1,API.sendChat(n(l.chat.toggleoff,{name:e.un,"function":"Bouncer+"}));if(l.settings.bouncerPlus)return API.sendChat(n(l.chat.bouncerplusrank,{name:e.un}));var i=e.uid,a=l.userUtilities.getPermission(i);return a>2?(l.settings.bouncerPlus=!0,API.sendChat(n(l.chat.toggleon,{name:e.un,"function":"Bouncer+"}))):void 0}},clearchatCommand:{command:"clearchat",rank:"manager",type:"exact",functionality:function(e,t){if("exact"===this.type&&e.message.length!==t.length)return void 0;if(l.commands.executable(this.rank,e)){for(var i=$("#chat-messages").children(),a=0;a<i.length;a++)API.moderateDeleteChat(i[a].getAttribute("data-cid"));return API.sendChat(n(l.chat.chatcleared,{name:e.un}))}return void 0}},commandsCommand:{command:"commands",rank:"user",type:"exact",functionality:function(e,t){return"exact"===this.type&&e.message.length!==t.length?void 0:l.commands.executable(this.rank,e)?void API.sendChat(n(l.chat.commandslink,{botname:l.settings.botName,link:l.cmdLink})):void 0
}},cookieCommand:{command:"cookie",rank:"user",type:"startsWith",cookies:["has given you a chocolate chip cookie! :D","has given you a soft homemade oatmeal cookie! :D","has given you a chocolate chip cookie that appears to be covered in semen.","gives you a sugar cookie. What, no frosting and sprinkles? 0/10 would not devour.","gives you a chocolate chip cookie. Oh wait, those are raisins. Bleck!","gives you an enormous cookie. Poking it gives you more cookies. Weird.",'gives you a fortune cookie. It reads "Do you even yiff?"','gives you a fortune cookie. It reads "Give that special someone a dick in their ass."','gives you a fortune cookie. It reads "Go have a wank!"','gives you a fortune cookie. It reads "Go outside."','gives you a fortune cookie. It reads "Don\'t forget to eat your veggies!"','gives you a fortune cookie. It reads "Ayy lmao."','gives you a fortune cookie. It reads "I\'M THE SHIT!"','gives you a fortune cookie. It reads "If you move your hips, you\'ll get all the vixens."','gives you a fortune cookie. It reads "I love you." <3',"is all out of cookies. What a tease.","gives you an Oreo cookie with a glass of milk!","gives you a gay rainbow cookie made with love :heart:","gives you an old cookie that was left out in the rain, it's moldy.","bakes you fresh cookies, they smell pretty nice."],getCookie:function(){var e=Math.floor(Math.random()*this.cookies.length);return this.cookies[e]},functionality:function(e,t){if("exact"===this.type&&e.message.length!==t.length)return void 0;if(l.commands.executable(this.rank,e)){var i=e.message,a=i.indexOf(" ");if(-1===a)return API.sendChat(l.chat.eatcookie),!1;var o=i.substring(a+2),s=l.userUtilities.lookupUserName(o);return API.sendChat(s!==!1&&s.inRoom?s.username===e.un?n(l.chat.selfcookie,{name:o}):n(l.chat.cookie,{nameto:s.username,namefrom:e.un,cookie:this.getCookie()}):n(l.chat.nousercookie,{name:o}))}return void 0}},cuddleCommand:{command:"cuddle",rank:"user",type:"startsWith",cuddles:["cuddles you as well as a roboserg can! <3","nuzzles up to you for cuddles!","activates cuddle mode and targets you.","invades your personal space and gropes you inappropriately!","glomps onto your side and steals a snuggle. Oof, heavy bot.","cuddles lovingly, kissing your neck~ ;3","sprawls out across your lap and begs for tummy rubs."],getCuddle:function(){var e=Math.floor(Math.random()*this.cuddles.length);return this.cuddles[e]},functionality:function(e,t){if("exact"===this.type&&e.message.length!==t.length)return void 0;if(l.commands.executable(this.rank,e)){var i=e.message,a=i.indexOf(" ");if(-1===a)return API.sendChat(l.chat.givecuddle),!1;var o=i.substring(a+2),s=l.userUtilities.lookupUserName(o);return API.sendChat(s!==!1&&s.inRoom?s.username===e.un?n(l.chat.selfcuddle,{name:o}):n(l.chat.cuddle,{nameto:s.username,namefrom:e.un,cuddle:this.getCuddle()}):n(l.chat.nousercuddle,{name:o}))}return void 0}},cycleCommand:{command:"cycle",rank:"manager",type:"exact",functionality:function(e,t){return"exact"===this.type&&e.message.length!==t.length?void 0:l.commands.executable(this.rank,e)?void l.roomUtilities.changeDJCycle():void 0}},cycleguardCommand:{command:"cycleguard",rank:"bouncer",type:"exact",functionality:function(e,t){return"exact"===this.type&&e.message.length!==t.length?void 0:l.commands.executable(this.rank,e)?l.settings.cycleGuard?(l.settings.cycleGuard=!l.settings.cycleGuard,API.sendChat(n(l.chat.toggleoff,{name:e.un,"function":l.chat.cycleguard}))):(l.settings.cycleGuard=!l.settings.cycleGuard,API.sendChat(n(l.chat.toggleon,{name:e.un,"function":l.chat.cycleguard}))):void 0}},cycletimerCommand:{command:"cycletimer",rank:"manager",type:"startsWith",functionality:function(e,t){if("exact"===this.type&&e.message.length!==t.length)return void 0;if(l.commands.executable(this.rank,e)){var i=e.message,a=i.substring(t.length+1);return isNaN(a)||""===a?API.sendChat(n(l.chat.invalidtime,{name:e.un})):(l.settings.maximumCycletime=a,API.sendChat(n(l.chat.cycleguardtime,{name:e.un,time:l.settings.maximumCycletime})))}return void 0}},voteskipCommand:{command:"voteskip",rank:"manager",type:"startsWith",functionality:function(e,t){if("exact"===this.type&&e.message.length!==t.length)return void 0;if(!l.commands.executable(this.rank,e))return void 0;var i=e.message;if(i.length<=t.length+1)return API.sendChat(n(l.chat.voteskiplimit,{name:e.un,limit:l.settings.voteSkipLimit}));var a=i.substring(t.length+1);l.settings.voteSkip||(l.settings.voteSkip=!l.settings.voteSkip),isNaN(a)?API.sendChat(n(l.chat.voteskipinvalidlimit,{name:e.un})):(l.settings.voteSkipLimit=a,API.sendChat(n(l.chat.voteskipsetlimit,{name:e.un,limit:l.settings.voteSkipLimit})))}},togglevoteskipCommand:{command:"togglevoteskip",rank:"bouncer",type:"exact",functionality:function(e,t){return"exact"===this.type&&e.message.length!==t.length?void 0:l.commands.executable(this.rank,e)?void(l.settings.voteSkip?(l.settings.voteSkip=!l.settings.voteSkip,API.sendChat(n(l.chat.toggleoff,{name:e.un,"function":l.chat.voteskip}))):(l.settings.voteSkip=!l.settings.voteSkip,API.sendChat(n(l.chat.toggleon,{name:e.un,"function":l.chat.voteskip})))):void 0}},dclookupCommand:{command:["dclookup","dc"],rank:"user",type:"startsWith",functionality:function(e,t){if("exact"===this.type&&e.message.length!==t.length)return void 0;if(!l.commands.executable(this.rank,e))return void 0;var i,a=e.message;if(a.length===t.length)i=e.un;else{i=a.substring(t.length+2);var o=l.userUtilities.getPermission(e.uid);if(2>o)return API.sendChat(n(l.chat.dclookuprank,{name:e.un}))}var s=l.userUtilities.lookupUserName(i);if("boolean"==typeof s)return API.sendChat(n(l.chat.invaliduserspecified,{name:e.un}));var r=l.userUtilities.dclookup(s.id);API.sendChat(r)}},emojiCommand:{command:"emoji",rank:"user",type:"exact",functionality:function(e,t){if("exact"===this.type&&e.message.length!==t.length)return void 0;if(!l.commands.executable(this.rank,e))return void 0;var i="http://www.emoji-cheat-sheet.com/";API.sendChat(n(l.chat.emojilist,{link:i}))}},englishCommand:{command:"english",rank:"bouncer",type:"startsWith",functionality:function(e,t){if("exact"===this.type&&e.message.length!==t.length)return void 0;if(!l.commands.executable(this.rank,e))return void 0;if(e.message.length===t.length)return API.sendChat("/me No user specified.");var n=e.message.substring(t.length+2),i=l.userUtilities.lookupUserName(n);if("boolean"==typeof i)return API.sendChat("/me Invalid user specified.");var a=l.userUtilities.getUser(i).language,o="/me @"+n+" ";switch(a){case"en":break;case"da":o+="Vær venlig at tale engelsk.";break;case"de":o+="Bitte sprechen Sie Englisch.";break;case"es":o+="Por favor, hable Inglés.";break;case"fr":o+="Parlez anglais, s'il vous plaît.";break;case"nl":o+="Spreek Engels, alstublieft.";break;case"pl":o+="Proszę mówić po angielsku.";break;case"pt":o+="Por favor, fale Inglês.";break;case"sk":o+="Hovorte po anglicky, prosím.";break;case"cs":o+="Mluvte prosím anglicky.";break;case"sr":o+="Молим Вас, говорите енглески."}o+=" English please.",API.sendChat(o)}},etaCommand:{command:"eta",rank:"user",type:"startsWith",functionality:function(e,t){if("exact"===this.type&&e.message.length!==t.length)return void 0;if(!l.commands.executable(this.rank,e))return void 0;var i,a=l.userUtilities.getPermission(e.uid),o=e.message;if(o.length>t.length){if(2>a)return void 0;i=o.substring(t.length+2)}else i=e.un;var s=l.userUtilities.lookupUserName(i);if("boolean"==typeof s)return API.sendChat(n(l.chat.invaliduserspecified,{name:e.un}));var r=API.getWaitListPosition(s.id);if(0>r)return API.sendChat(n(l.chat.notinwaitlist,{name:i}));var u=API.getTimeRemaining(),m=1e3*(4*(r+1)*60+u),c=l.roomUtilities.msToStr(m);API.sendChat(n(l.chat.eta,{name:i,time:c}))}},fbCommand:{command:"fb",rank:"user",type:"exact",functionality:function(e,t){return"exact"===this.type&&e.message.length!==t.length?void 0:l.commands.executable(this.rank,e)?void("string"==typeof l.settings.fbLink&&API.sendChat(n(l.chat.facebook,{link:l.settings.fbLink}))):void 0}},filterCommand:{command:"filter",rank:"bouncer",type:"exact",functionality:function(e,t){return"exact"===this.type&&e.message.length!==t.length?void 0:l.commands.executable(this.rank,e)?l.settings.filterChat?(l.settings.filterChat=!l.settings.filterChat,API.sendChat(n(l.chat.toggleoff,{name:e.un,"function":l.chat.chatfilter}))):(l.settings.filterChat=!l.settings.filterChat,API.sendChat(n(l.chat.toggleon,{name:e.un,"function":l.chat.chatfilter}))):void 0}},helpCommand:{command:"help",rank:"user",type:"exact",functionality:function(e,t){if("exact"===this.type&&e.message.length!==t.length)return void 0;if(!l.commands.executable(this.rank,e))return void 0;var i="(Updated link coming soon)";API.sendChat(n(l.chat.starterhelp,{link:i}))}},historyskipCommand:{command:"historyskip",rank:"bouncer",type:"exact",functionality:function(e,t){return"exact"===this.type&&e.message.length!==t.length?void 0:l.commands.executable(this.rank,e)?void(l.settings.historySkip?(l.settings.historySkip=!l.settings.historySkip,API.sendChat(n(l.chat.toggleoff,{name:e.un,"function":l.chat.historyskip}))):(l.settings.historySkip=!l.settings.historySkip,API.sendChat(n(l.chat.toggleon,{name:e.un,"function":l.chat.historyskip})))):void 0}},joinCommand:{command:"join",rank:"user",type:"exact",functionality:function(e,t){return"exact"===this.type&&e.message.length!==t.length?void 0:l.commands.executable(this.rank,e)?void(l.room.roulette.rouletteStatus&&l.room.roulette.participants.indexOf(e.uid)<0&&(l.room.roulette.participants.push(e.uid),API.sendChat(n(l.chat.roulettejoin,{name:e.un})))):void 0}},jointimeCommand:{command:"jointime",rank:"bouncer",type:"startsWith",functionality:function(e,t){if("exact"===this.type&&e.message.length!==t.length)return void 0;if(!l.commands.executable(this.rank,e))return void 0;var i=e.message;if(i.length===t.length)return API.sendChat(n(l.chat.nouserspecified,{name:e.un}));var a=i.substring(t.length+2),o=l.userUtilities.lookupUserName(a);if("boolean"==typeof o)return API.sendChat(n(l.chat.invaliduserspecified,{name:e.un}));var s=l.userUtilities.getJointime(o),r=Date.now()-s,u=l.roomUtilities.msToStr(r);API.sendChat(n(l.chat.jointime,{namefrom:e.un,username:a,time:u}))}},kickCommand:{command:"kick",rank:"bouncer",type:"startsWith",functionality:function(e,t){if("exact"===this.type&&e.message.length!==t.length)return void 0;if(!l.commands.executable(this.rank,e))return void 0;var i,a,o=e.message,s=o.lastIndexOf(" ");s===o.indexOf(" ")?(i=.25,a=o.substring(t.length+2)):(i=o.substring(s+1),a=o.substring(t.length+2,s));{var r=l.userUtilities.lookupUserName(a);e.un}if("boolean"==typeof r)return API.sendChat(n(l.chat.nouserspecified,{name:e.un}));var u=l.userUtilities.getPermission(e.uid),m=l.userUtilities.getPermission(r.id);return m>=u?API.sendChat(n(l.chat.kickrank,{name:e.un})):void(isNaN(i)?API.sendChat(n(l.chat.invalidtime,{name:e.un})):(API.sendChat(n(l.chat.kick,{name:e.un,username:a,time:i})),i>86400?API.moderateBanUser(r.id,1,API.BAN.PERMA):API.moderateBanUser(r.id,1,API.BAN.DAY),setTimeout(function(e,t){API.moderateUnbanUser(e),console.log("Unbanned @"+t+". ("+e+")")},60*i*1e3,r.id,a)))}},killCommand:{command:"kill",rank:"bouncer",type:"exact",functionality:function(n,i){return"exact"===this.type&&n.message.length!==i.length?void 0:l.commands.executable(this.rank,n)?(t(),API.sendChat(l.chat.kill),l.disconnectAPI(),setTimeout(function(){e()},1e3),void 0):void 0}},leaveCommand:{command:"leave",rank:"user",type:"exact",functionality:function(e,t){if("exact"===this.type&&e.message.length!==t.length)return void 0;if(!l.commands.executable(this.rank,e))return void 0;var i=l.room.roulette.participants.indexOf(e.uid);i>-1&&(l.room.roulette.participants.splice(i,1),API.sendChat(n(l.chat.rouletteleave,{name:e.un})))}},linkCommand:{command:"link",rank:"user",type:"exact",functionality:function(e,t){if("exact"===this.type&&e.message.length!==t.length)return void 0;if(!l.commands.executable(this.rank,e))return void 0;var i=API.getMedia(),a=e.un,o=(l.userUtilities.lookupUser(e.uid),l.userUtilities.getPermission(e.uid)),s=API.getDJ().id,r=!1;if(s===e.uid&&(r=!0),o>=1||r){if(1===i.format){var u="https://www.youtube.com/watch?v="+i.cid;API.sendChat(n(l.chat.songlink,{name:a,link:u}))}2===i.format&&SC.get("/tracks/"+i.cid,function(e){API.sendChat(n(l.chat.songlink,{name:a,link:e.permalink_url}))})}}},lockCommand:{command:"lock",rank:"mod",type:"exact",functionality:function(e,t){return"exact"===this.type&&e.message.length!==t.length?void 0:l.commands.executable(this.rank,e)?void l.roomUtilities.booth.lockBooth():void 0}},lockdownCommand:{command:"lockdown",rank:"mod",type:"exact",functionality:function(e,t){if("exact"===this.type&&e.message.length!==t.length)return void 0;if(l.commands.executable(this.rank,e)){var i=l.settings.lockdownEnabled;return l.settings.lockdownEnabled=!i,API.sendChat(l.settings.lockdownEnabled?n(l.chat.toggleon,{name:e.un,"function":l.chat.lockdown}):n(l.chat.toggleoff,{name:e.un,"function":l.chat.lockdown}))}return void 0}},lockguardCommand:{command:"lockguard",rank:"bouncer",type:"exact",functionality:function(e,t){return"exact"===this.type&&e.message.length!==t.length?void 0:l.commands.executable(this.rank,e)?l.settings.lockGuard?(l.settings.lockGuard=!l.settings.lockGuard,API.sendChat(n(l.chat.toggleoff,{name:e.un,"function":l.chat.lockguard}))):(l.settings.lockGuard=!l.settings.lockGuard,API.sendChat(n(l.chat.toggleon,{name:e.un,"function":l.chat.lockguard}))):void 0}},lockskipCommand:{command:"lockskip",rank:"bouncer",type:"startsWith",functionality:function(e,t){if("exact"===this.type&&e.message.length!==t.length)return void 0;if(!l.commands.executable(this.rank,e))return void 0;if(l.room.skippable){var i=API.getDJ(),a=i.id,o=i.username,s="@"+o+": ";if(l.room.queueable=!1,e.message.length===t.length)return API.sendChat(n(l.chat.usedlockskip,{name:e.un})),l.roomUtilities.booth.lockBooth(),void setTimeout(function(e){API.moderateForceSkip(),l.room.skippable=!1,setTimeout(function(){l.room.skippable=!0},5e3),setTimeout(function(e){l.userUtilities.moveUser(e,l.settings.lockskipPosition,!1),l.room.queueable=!0,setTimeout(function(){l.roomUtilities.booth.unlockBooth()},1e3)},1500,e)},1e3,a);for(var r=!1,u=e.message,m=u.substring(t.length+1),c=0;c<l.settings.lockskipReasons.length;c++){var d=l.settings.lockskipReasons[c][0];-1!==m.indexOf(d)&&(r=!0,s+=l.settings.lockskipReasons[c][1])}if(r)return API.sendChat(n(l.chat.usedlockskip,{name:e.un})),l.roomUtilities.booth.lockBooth(),void setTimeout(function(e){API.moderateForceSkip(),l.room.skippable=!1,API.sendChat(s),setTimeout(function(){l.room.skippable=!0},5e3),setTimeout(function(e){l.userUtilities.moveUser(e,l.settings.lockskipPosition,!1),l.room.queueable=!0,setTimeout(function(){l.roomUtilities.booth.unlockBooth()},1e3)},1500,e)},1e3,a)}}},lockskipposCommand:{command:"lockskippos",rank:"manager",type:"startsWith",functionality:function(e,t){if("exact"===this.type&&e.message.length!==t.length)return void 0;if(l.commands.executable(this.rank,e)){var i=e.message,a=i.substring(t.length+1);return isNaN(a)?API.sendChat(n(l.chat.invalidpositionspecified,{name:e.un})):(l.settings.lockskipPosition=a,API.sendChat(n(l.chat.lockskippos,{name:e.un,position:l.settings.lockskipPosition})))}return void 0}},locktimerCommand:{command:"locktimer",rank:"manager",type:"startsWith",functionality:function(e,t){if("exact"===this.type&&e.message.length!==t.length)return void 0;if(l.commands.executable(this.rank,e)){var i=e.message,a=i.substring(t.length+1);return isNaN(a)||""===a?API.sendChat(n(l.chat.invalidtime,{name:e.un})):(l.settings.maximumLocktime=a,API.sendChat(n(l.chat.lockguardtime,{name:e.un,time:l.settings.maximumLocktime})))}return void 0}},maxlengthCommand:{command:"maxlength",rank:"manager",type:"startsWith",functionality:function(e,t){if("exact"===this.type&&e.message.length!==t.length)return void 0;if(l.commands.executable(this.rank,e)){var i=e.message,a=i.substring(t.length+1);return isNaN(a)?API.sendChat(n(l.chat.invalidtime,{name:e.un})):(l.settings.maximumSongLength=a,API.sendChat(n(l.chat.maxlengthtime,{name:e.un,time:l.settings.maximumSongLength})))}return void 0}},motdCommand:{command:"motd",rank:"bouncer",type:"startsWith",functionality:function(e,t){if("exact"===this.type&&e.message.length!==t.length)return void 0;if(!l.commands.executable(this.rank,e))return void 0;var i=e.message;if(i.length<=t.length+1)return API.sendChat("/me MotD: "+l.settings.motd);var a=i.substring(t.length+1);l.settings.motdEnabled||(l.settings.motdEnabled=!l.settings.motdEnabled),isNaN(a)?(l.settings.motd=a,API.sendChat(n(l.chat.motdset,{msg:l.settings.motd}))):(l.settings.motdInterval=a,API.sendChat(n(l.chat.motdintervalset,{interval:l.settings.motdInterval})))}},moveCommand:{command:"move",rank:"mod",type:"startsWith",functionality:function(e,t){if("exact"===this.type&&e.message.length!==t.length)return void 0;if(!l.commands.executable(this.rank,e))return void 0;var i=e.message;if(i.length===t.length)return API.sendChat(n(l.chat.nouserspecified,{name:e.un}));var a,o,s=(i.indexOf(" "),i.lastIndexOf(" "));isNaN(parseInt(i.substring(s+1)))?(a=1,o=i.substring(t.length+2)):(a=parseInt(i.substring(s+1)),o=i.substring(t.length+2,s));var r=l.userUtilities.lookupUserName(o);return"boolean"==typeof r?API.sendChat(n(l.chat.invaliduserspecified,{name:e.un})):r.id===l.loggedInID?API.sendChat(n(l.chat.addbotwaitlist,{name:e.un})):isNaN(a)?API.sendChat(n(l.chat.invalidpositionspecified,{name:e.un})):(API.sendChat(n(l.chat.move,{name:e.un})),void l.userUtilities.moveUser(r.id,a,!1))}},muteCommand:{command:"mute",rank:"bouncer",type:"startsWith",functionality:function(e,t){if("exact"===this.type&&e.message.length!==t.length)return void 0;if(!l.commands.executable(this.rank,e))return void 0;var i=e.message;if(i.length===t.length)return API.sendChat(n(l.chat.nouserspecified,{name:e.un}));var a,o=i.lastIndexOf(" "),s=null;if(o===i.indexOf(" "))a=i.substring(t.length+2),s=45;else{if(s=i.substring(o+1),isNaN(s)||""==s||null==s||void 0===s)return API.sendChat(n(l.chat.invalidtime,{name:e.un}));a=i.substring(t.length+2,o)}var r=(e.un,l.userUtilities.lookupUserName(a));if("boolean"==typeof r)return API.sendChat(n(l.chat.invaliduserspecified,{name:e.un}));var u=l.userUtilities.getPermission(e.uid),m=l.userUtilities.getPermission(r.id);u>m?s>45?(API.sendChat(n(l.chat.mutedmaxtime,{name:e.un,time:"45"})),API.moderateMuteUser(r.id,1,API.MUTE.LONG)):45===s?(API.moderateMuteUser(r.id,1,API.MUTE.LONG),API.sendChat(n(l.chat.mutedtime,{name:e.un,username:a,time:s}))):s>30?(API.moderateMuteUser(r.id,1,API.MUTE.LONG),API.sendChat(n(l.chat.mutedtime,{name:e.un,username:a,time:s})),setTimeout(function(e){API.moderateUnmuteUser(e)},60*s*1e3,r.id)):s>15?(API.moderateMuteUser(r.id,1,API.MUTE.MEDIUM),API.sendChat(n(l.chat.mutedtime,{name:e.un,username:a,time:s})),setTimeout(function(e){API.moderateUnmuteUser(e)},60*s*1e3,r.id)):(API.moderateMuteUser(r.id,1,API.MUTE.SHORT),API.sendChat(n(l.chat.mutedtime,{name:e.un,username:a,time:s})),setTimeout(function(e){API.moderateUnmuteUser(e)},60*s*1e3,r.id)):API.sendChat(n(l.chat.muterank,{name:e.un}))}},opCommand:{command:"op",rank:"user",type:"exact",functionality:function(e,t){return"exact"===this.type&&e.message.length!==t.length?void 0:l.commands.executable(this.rank,e)&&"string"==typeof l.settings.opLink?API.sendChat(n(l.chat.oplist,{link:l.settings.opLink})):void 0}},pingCommand:{command:"ping",rank:"user",type:"exact",functionality:function(e,t){return"exact"===this.type&&e.message.length!==t.length?void 0:l.commands.executable(this.rank,e)?void API.sendChat(l.chat.pong):void 0}},refreshCommand:{command:"refresh",rank:"manager",type:"exact",functionality:function(e,n){return"exact"===this.type&&e.message.length!==n.length?void 0:l.commands.executable(this.rank,e)?(t(),l.disconnectAPI(),setTimeout(function(){window.location.reload(!1)},1e3),void 0):void 0}},reloadCommand:{command:"reload",rank:"bouncer",type:"exact",functionality:function(n,i){return"exact"===this.type&&n.message.length!==i.length?void 0:l.commands.executable(this.rank,n)?(API.sendChat(l.chat.reload),t(),l.disconnectAPI(),e(),setTimeout(function(){$.getScript(l.scriptLink)},2e3),void 0):void 0}},removeCommand:{command:"remove",rank:"mod",type:"startsWith",functionality:function(e,t){if("exact"===this.type&&e.message.length!==t.length)return void 0;if(!l.commands.executable(this.rank,e))return void 0;var i=e.message;if(i.length>t.length+2){var a=i.substr(t.length+2),o=l.userUtilities.lookupUserName(a);"boolean"!=typeof o?(o.lastDC={time:null,position:null,songCount:0},API.getDJ().id===o.id?(API.moderateForceSkip(),setTimeout(function(){API.moderateRemoveDJ(o.id)},1e3,o)):API.moderateRemoveDJ(o.id)):API.sendChat(n(l.chat.removenotinwl,{name:e.un,username:a}))}else API.sendChat(n(l.chat.nouserspecified,{name:e.un}))}},restrictetaCommand:{command:"restricteta",rank:"bouncer",type:"exact",functionality:function(e,t){return"exact"===this.type&&e.message.length!==t.length?void 0:l.commands.executable(this.rank,e)?l.settings.etaRestriction?(l.settings.etaRestriction=!l.settings.etaRestriction,API.sendChat(n(l.chat.toggleoff,{name:e.un,"function":l.chat.etarestriction}))):(l.settings.etaRestriction=!l.settings.etaRestriction,API.sendChat(n(l.chat.toggleon,{name:e.un,"function":l.chat.etarestriction}))):void 0}},rouletteCommand:{command:"roulette",rank:"mod",type:"exact",functionality:function(e,t){return"exact"===this.type&&e.message.length!==t.length?void 0:l.commands.executable(this.rank,e)?void(l.room.roulette.rouletteStatus||l.room.roulette.startRoulette()):void 0}},rulesCommand:{command:"rules",rank:"user",type:"exact",functionality:function(e,t){return"exact"===this.type&&e.message.length!==t.length?void 0:l.commands.executable(this.rank,e)&&"string"==typeof l.settings.rulesLink?API.sendChat(n(l.chat.roomrules,{link:l.settings.rulesLink})):void 0}},sessionstatsCommand:{command:"sessionstats",rank:"bouncer",type:"exact",functionality:function(e,t){if("exact"===this.type&&e.message.length!==t.length)return void 0;if(!l.commands.executable(this.rank,e))return void 0;var i=e.un,a=l.room.roomstats.totalWoots,o=l.room.roomstats.totalMehs,s=l.room.roomstats.totalCurates;API.sendChat(n(l.chat.sessionstats,{name:i,woots:a,mehs:o,grabs:s}))}},skipCommand:{command:"skip",rank:"bouncer",type:"exact",functionality:function(e,t){return"exact"===this.type&&e.message.length!==t.length?void 0:l.commands.executable(this.rank,e)?(API.sendChat(n(l.chat.skip,{name:e.un})),API.moderateForceSkip(),l.room.skippable=!1,setTimeout(function(){l.room.skippable=!0},5e3),void 0):void 0}},songstatsCommand:{command:"songstats",rank:"mod",type:"exact",functionality:function(e,t){return"exact"===this.type&&e.message.length!==t.length?void 0:l.commands.executable(this.rank,e)?l.settings.songstats?(l.settings.songstats=!l.settings.songstats,API.sendChat(n(l.chat.toggleoff,{name:e.un,"function":l.chat.songstats}))):(l.settings.songstats=!l.settings.songstats,API.sendChat(n(l.chat.toggleon,{name:e.un,"function":l.chat.songstats}))):void 0}},sourceCommand:{command:"source",rank:"user",type:"exact",functionality:function(e,t){return"exact"===this.type&&e.message.length!==t.length?void 0:l.commands.executable(this.rank,e)?void API.sendChat("/me This bot was created by "+r+", but is now maintained by "+u+". This bot is running a fork by "+m+"."):void 0}},statusCommand:{command:"status",rank:"bouncer",type:"exact",functionality:function(e,t){if("exact"===this.type&&e.message.length!==t.length)return void 0;if(l.commands.executable(this.rank,e)){var i=e.un,a="/me [@"+i+"] ";a+=l.chat.afkremoval+": ",a+=l.settings.afkRemoval?"ON":"OFF",a+=". ",a+=l.chat.afksremoved+": "+l.room.afkList.length+". ",a+=l.chat.afklimit+": "+l.settings.maximumAfk+". ",a+="Bouncer+: ",a+=l.settings.bouncerPlus?"ON":"OFF",a+=". ",a+=l.chat.blacklist+": ",a+=l.settings.blacklistEnabled?"ON":"OFF",a+=". ",a+=l.chat.lockguard+": ",a+=l.settings.lockGuard?"ON":"OFF",a+=". ",a+=l.chat.cycleguard+": ",a+=l.settings.cycleGuard?"ON":"OFF",a+=". ",a+=l.chat.timeguard+": ",a+=l.settings.timeGuard?"ON":"OFF",a+=". ",a+=l.chat.chatfilter+": ",a+=l.settings.filterChat?"ON":"OFF",a+=". ",a+=l.chat.historyskip+": ",a+=l.settings.historySkip?"ON":"OFF",a+=". ",a+=l.chat.voteskip+": ",a+=l.settings.voteSkip?"ON":"OFF",a+=". ";var o=l.room.roomstats.launchTime,s=Date.now()-o,r=l.roomUtilities.msToStr(s);return a+=n(l.chat.activefor,{time:r}),API.sendChat(a)}return void 0}},swapCommand:{command:"swap",rank:"mod",type:"startsWith",functionality:function(e,t){if("exact"===this.type&&e.message.length!==t.length)return void 0;if(!l.commands.executable(this.rank,e))return void 0;var i=e.message;if(i.length===t.length)return API.sendChat(n(l.chat.nouserspecified,{name:e.un}));var a=(i.indexOf(" "),i.lastIndexOf(" ")),o=i.substring(t.length+2,a),s=i.substring(a+2),r=l.userUtilities.lookupUserName(o),u=l.userUtilities.lookupUserName(s);if("boolean"==typeof r||"boolean"==typeof u)return API.sendChat(n(l.chat.swapinvalid,{name:e.un}));if(r.id===l.loggedInID||u.id===l.loggedInID)return API.sendChat(n(l.chat.addbottowaitlist,{name:e.un}));var m=API.getWaitListPosition(r.id)+1,c=API.getWaitListPosition(u.id)+1;return 0>m||0>c?API.sendChat(n(l.chat.swapwlonly,{name:e.un})):(API.sendChat(n(l.chat.swapping,{name1:o,name2:s})),void(c>m?(l.userUtilities.moveUser(u.id,m,!1),setTimeout(function(e,t){l.userUtilities.moveUser(e.id,t,!1)},2e3,r,c)):(l.userUtilities.moveUser(r.id,c,!1),setTimeout(function(e,t){l.userUtilities.moveUser(e.id,t,!1)},2e3,u,m))))}},themeCommand:{command:"theme",rank:"user",type:"exact",functionality:function(e,t){return"exact"===this.type&&e.message.length!==t.length?void 0:l.commands.executable(this.rank,e)?void("string"==typeof l.settings.themeLink&&API.sendChat(n(l.chat.genres,{link:l.settings.themeLink}))):void 0}},timeguardCommand:{command:"timeguard",rank:"bouncer",type:"exact",functionality:function(e,t){return"exact"===this.type&&e.message.length!==t.length?void 0:l.commands.executable(this.rank,e)?l.settings.timeGuard?(l.settings.timeGuard=!l.settings.timeGuard,API.sendChat(n(l.chat.toggleoff,{name:e.un,"function":l.chat.timeguard}))):(l.settings.timeGuard=!l.settings.timeGuard,API.sendChat(n(l.chat.toggleon,{name:e.un,"function":l.chat.timeguard}))):void 0}},toggleblCommand:{command:"togglebl",rank:"bouncer",type:"exact",functionality:function(e,t){if("exact"===this.type&&e.message.length!==t.length)return void 0;if(l.commands.executable(this.rank,e)){var i=l.settings.blacklistEnabled;return l.settings.blacklistEnabled=!i,API.sendChat(l.settings.blacklistEnabled?n(l.chat.toggleon,{name:e.un,"function":l.chat.blacklist}):n(l.chat.toggleoff,{name:e.un,"function":l.chat.blacklist}))}return void 0}},togglemotdCommand:{command:"togglemotd",rank:"bouncer",type:"exact",functionality:function(e,t){return"exact"===this.type&&e.message.length!==t.length?void 0:l.commands.executable(this.rank,e)?void(l.settings.motdEnabled?(l.settings.motdEnabled=!l.settings.motdEnabled,API.sendChat(n(l.chat.toggleoff,{name:e.un,"function":l.chat.motd}))):(l.settings.motdEnabled=!l.settings.motdEnabled,API.sendChat(n(l.chat.toggleon,{name:e.un,"function":l.chat.motd})))):void 0}},unbanCommand:{command:"unban",rank:"bouncer",type:"startsWith",functionality:function(e,t){return"exact"===this.type&&e.message.length!==t.length?void 0:l.commands.executable(this.rank,e)?($(".icon-population").click(),$(".icon-ban").click(),setTimeout(function(e){var i=e.message;if(i.length===t.length)return API.sendChat();for(var a=i.substring(t.length+2),o=API.getBannedUsers(),s=!1,r=null,u=0;u<o.length;u++){var m=o[u];m.username===a&&(r=m,s=!0)}return s?(API.moderateUnbanUser(r.id),console.log("Unbanned "+a),void setTimeout(function(){$(".icon-chat").click()},1e3)):($(".icon-chat").click(),API.sendChat(n(l.chat.notbanned,{name:e.un})))},1e3,e),void 0):void 0}},unlockCommand:{command:"unlock",rank:"mod",type:"exact",functionality:function(e,t){return"exact"===this.type&&e.message.length!==t.length?void 0:l.commands.executable(this.rank,e)?void l.roomUtilities.booth.unlockBooth():void 0}},unmuteCommand:{command:"unmute",rank:"bouncer",type:"startsWith",functionality:function(e,t){if("exact"===this.type&&e.message.length!==t.length)return void 0;if(!l.commands.executable(this.rank,e))return void 0;var i=e.message,a=l.userUtilities.getPermission(e.uid),o=(e.un,i.substr(t.length+2)),s=l.userUtilities.lookupUserName(o);if("boolean"==typeof s)return API.sendChat(n(l.chat.invaliduserspecified,{name:e.un}));var r=l.userUtilities.getPermission(s.id);if(a>r)try{API.moderateUnmuteUser(s.id),API.sendChat(n(l.chat.unmuted,{name:e.un,username:o}))}catch(u){API.sendChat(n(l.chat.notmuted,{name:e.un}))}else API.sendChat(n(l.chat.unmuterank,{name:e.un}))}},usercmdcdCommand:{command:"usercmdcd",rank:"manager",type:"startsWith",functionality:function(e,t){if("exact"===this.type&&e.message.length!==t.length)return void 0;if(l.commands.executable(this.rank,e)){var i=e.message,a=i.substring(t.length+1);return isNaN(a)?API.sendChat(n(l.chat.invalidtime,{name:e.un})):(l.settings.commandCooldown=a,API.sendChat(n(l.chat.commandscd,{name:e.un,time:l.settings.commandCooldown})))}return void 0}},usercommandsCommand:{command:"usercommands",rank:"manager",type:"exact",functionality:function(e,t){return"exact"===this.type&&e.message.length!==t.length?void 0:l.commands.executable(this.rank,e)?void(l.settings.usercommandsEnabled?(API.sendChat(n(l.chat.toggleoff,{name:e.un,"function":l.chat.usercommands})),l.settings.usercommandsEnabled=!l.settings.usercommandsEnabled):(API.sendChat(n(l.chat.toggleon,{name:e.un,"function":l.chat.usercommands})),l.settings.usercommandsEnabled=!l.settings.usercommandsEnabled)):void 0}},voteratioCommand:{command:"voteratio",rank:"bouncer",type:"startsWith",functionality:function(e,t){if("exact"===this.type&&e.message.length!==t.length)return void 0;if(!l.commands.executable(this.rank,e))return void 0;var i=e.message;if(i.length===t.length)return API.sendChat(n(l.chat.nouserspecified,{name:e.un}));var a=i.substring(t.length+2),o=l.userUtilities.lookupUserName(a);if(o===!1)return API.sendChat(n(l.chat.invaliduserspecified,{name:e.un}));var s=o.votes,r=s.woot/s.meh;API.sendChat(n(l.chat.voteratio,{name:e.un,username:a,woot:s.woot,mehs:s.meh,ratio:r.toFixed(2)}))}},welcomeCommand:{command:"welcome",rank:"mod",type:"exact",functionality:function(e,t){return"exact"===this.type&&e.message.length!==t.length?void 0:l.commands.executable(this.rank,e)?l.settings.welcome?(l.settings.welcome=!l.settings.welcome,API.sendChat(n(l.chat.toggleoff,{name:e.un,"function":l.chat.welcomemsg}))):(l.settings.welcome=!l.settings.welcome,API.sendChat(n(l.chat.toggleon,{name:e.un,"function":l.chat.welcomemsg}))):void 0}},websiteCommand:{command:"website",rank:"user",type:"exact",functionality:function(e,t){return"exact"===this.type&&e.message.length!==t.length?void 0:l.commands.executable(this.rank,e)?void("string"==typeof l.settings.website&&API.sendChat(n(l.chat.website,{link:l.settings.website}))):void 0}},youtubeCommand:{command:"youtube",rank:"user",type:"exact",functionality:function(e,t){return"exact"===this.type&&e.message.length!==t.length?void 0:l.commands.executable(this.rank,e)?void("string"==typeof l.settings.youtubeLink&&API.sendChat(n(l.chat.youtube,{name:e.un,link:l.settings.youtubeLink}))):void 0}}}};i(l.startup)}).call(this);